#
# Master-Master Manager config (monitor)
#

# Debug mode
debug no

# Paths
pid_path /opt/mmm/var/mmmd.pid
status_path /opt/mmm/var/mmmd.status
bin_path /opt/mmm/bin

# Logging setup
log mydebug 
    file /opt/mmm/var/mmm-debug.log
    level debug

log mytraps 
    file /opt/mmm/var/mmm-traps.log
    level trap


# MMMD command socket tcp-port
bind_port 9988
agent_port 9989
monitor_ip 127.0.0.1

# Cluster interface
cluster_interface eth0

# Cluster hosts addresses and access params
host db8
    ip 192.168.1.8
    port 3306
    user rep_monitor
    password RepMonitor
    mode master
    peer db9

host db9
    ip 192.168.1.9
    port 3306
    user rep_monitor
    password RepMonitor
    mode master
    peer db8

host db10
    ip 192.168.1.10
    port 3306
    user rep_monitor
    password RepMonitor
    mode slave

#
# Define roles
#

active_master_role writer

# Mysql Reader role
role reader
    mode balanced
    servers db8, db9, db10
    ip 172.16.1.210, 172.16.1.211, 172.16.1.212

# Mysql Writer role
role writer
    mode exclusive
    servers db8, db9
    ip 172.16.1.200

#
# Checks parameters
#

# Ping checker
check ping
    check_period 1
    trap_period 5
    timeout 2

# Mysql checker
check mysql
    check_period 1
    trap_period  2
    timeout 2

# Mysql replication backlog checker
check rep_backlog
    check_period 5
    trap_period 10
    max_backlog 60
    timeout 2

# Mysql replication threads checker
check rep_threads
    check_period 1
    trap_period 5
    timeout 2

